Description: <short summary of the patch>
 TODO: Put a short summary on the line above and replace this paragraph
 with a longer explanation of this change. Complete the meta-information
 with other relevant fields (see below for details). To make it easier, the
 information below has been extracted from the changelog. Adjust it or drop
 it.
 .
 ocompiler (1-5+156) xenial; urgency=medium
 .
   * uniqueness for numbers: prefix,open,close,done and operations
Author: bc <bc@bc-desktop>

---
The information above should follow the Patch Tagging Guidelines, please
checkout https://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: (upstream|backport|vendor|other), (<patch-url>|commit:<commit-id>)
Bug: <upstream-bugtracker-url>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: (no|not-needed|<patch-forwarded-url>)
Applied-Upstream: <version>, (<commit-url>|commit:<commid-id>)
Reviewed-By: <name and email of someone who approved/reviewed the patch>
Last-Update: 2024-04-05

--- ocompiler-1.orig/o.html
+++ ocompiler-1/o.html
@@ -705,11 +705,12 @@
 	All functions can be used in combinations like <b>AddCall</b>, <b>OrCall</b>, <b>XorCall</b>, etc (<i>set a b()</i> is same as <i>setcall a b()</i>).
 	<br>
 	<b>CallEx</b> is for prepared calls. This is a 3 argument operation. The first argument is the function name, the second argument is the arguments pointer and the third argument is the number of arguments. The arguments are passed forward respecting the size of the integer(4 bytes on 32-bits app, 8 on 64). One usage can be when there is a call with a number of arguments detected at run-time and want to pass them all to another call.
-	<b>CallExRet</b> (like <b>CallRet</b>, or <b>CallXRet</b>) can return from a function.
 	<br>
 	<b>CallX</b>, <b>...XCall</b>, <b>CallExX</b> will call like a <b>FunctionX</b>/<b>ImportX</b>.
 	<br>
 	<b>Call[X]G</b>, <b>...[X]G</b>, <b>CallEx[X]G</b> will skip aftercall.
+	<br>
+	<b>Call[Ex][X]Ret</b> can return from a function. Note that "G" is useless when "RET" is coming.
 	<p>
 	Example:
 	<a class="code">
@@ -1065,7 +1066,7 @@
 	<tr>                                           <td rowspan=2>Xfile_arg_varfn_colon_yes</td><td colspan=2>Xfile_arg_varfn_dot_no</td>                                         <td class="red" rowspan=2>var</td><td rowspan=2>Xfile_suffix_*</td>
 	<tr>                                                                                       <td>Xfile_arg_varfn_dot_yes</td>         <td class="red">func<sup-r>f</sup-r></td></tr>
 </table>
-<br><div class="green">A C CD CL D DT <sup-r>f</sup-r> N <sup-r>s</sup-r> V VF</div>
+<br><div class="green">Arg Cal ConD CaLl Decl DoT <sup-r>f</sup-r> Nr <sup-r>s</sup-r> Var VarFunc</div>
 <h3><a name="otheroperations">XVI. Other operations</a></h3>
 <p>
 	Other commands that comes with the language.
--- ocompiler-1.orig/old.html
+++ ocompiler-1/old.html
@@ -1,4 +1,6 @@
-File ID: 19rIc3RSuaYS1VXQhvYLlho4cv9ZpsQ3j
+File ID: 1V2Ovra0KkXmgKuf1p1dhRyM0jfyK4VNq
+<p>Found file: ./ocompiler-1-5+155.x86_64.rpm, 1V2Ovra0KkXmgKuf1p1dhRyM0jfyK4VNq, 2024-04-05T06:31:59.783Z, 69987, https://drive.google.com/uc?id=1V2Ovra0KkXmgKuf1p1dhRyM0jfyK4VNq&export=download
+anyoneWithLink</p>
 <p>Found file: ./ocompiler-1-5+154.x86_64.rpm, 19rIc3RSuaYS1VXQhvYLlho4cv9ZpsQ3j, 2024-03-29T12:11:08.735Z, 69945, https://drive.google.com/uc?id=19rIc3RSuaYS1VXQhvYLlho4cv9ZpsQ3j&export=download
 anyoneWithLink</p>
 <p>Found file: ./ocompiler-1-5+145.x86_64.rpm, 1zPU9BqaKrMs8EHk5zBdnefZxhTxNiQ6w, 2024-03-08T05:47:37.878Z, 69772, https://drive.google.com/uc?id=1zPU9BqaKrMs8EHk5zBdnefZxhTxNiQ6w&export=download
--- /dev/null
+++ ocompiler-1/otoc/decl.oc
@@ -0,0 +1,36 @@
+
+#D structure
+function decl(sv pbuffer)
+	charx field#1;call get_char(pbuffer,#field)
+	if field!=(Xfile_declfield_const)
+		if field=(Xfile_declfield_data)
+			charx data#1;call get_char(pbuffer,#data)
+		end
+		charx type#1;call get_char(pbuffer,#type)
+		charx feature#1;call get_char(pbuffer,#feature)
+	end
+	datax sz#1;valuex pointer#1
+	call get_string(pbuffer,#sz,#pointer)
+end
+
+function functiondef_intern(sv pbuffer)
+	datax args#1;call get_data(pbuffer,#args)
+	sd n=0;while n!=args
+		call decl(pbuffer)
+		inc n
+	end
+end
+#function functiondef_raw(sv pbuffer)
+function functiondef_extern(sv pbuffer)
+	charx e#1;call get_char(pbuffer,#e)
+	call functiondef_intern(pbuffer)
+end
+#function functiondef_entry(sv pbuffer)
+
+#N structure
+function number(sv pbuffer)
+	charx prefix#1;call get_char(pbuffer,#prefix)
+	charx type#1;call get_char(pbuffer,#type)
+	charx next#1;call get_char(pbuffer,#next)
+	# <=prefix done open close operation
+end
--- ocompiler-1.orig/otoc/function.oc
+++ /dev/null
@@ -1,10 +0,0 @@
-
-function functiondef_intern(sv pbuffer)
-	datax args#1;call get_data(pbuffer,#args)
-end
-#function functiondef_raw(sv pbuffer)
-function functiondef_extern(sv pbuffer)
-	charx e#1;call get_char(pbuffer,#e)
-	call functiondef_intern(pbuffer)
-end
-#function functiondef_entry(sv pbuffer)
--- ocompiler-1.orig/otoc/loop.oc
+++ ocompiler-1/otoc/loop.oc
@@ -6,6 +6,7 @@ importx "malloc" malloc
 importx "fread" fread
 importx "free" free
 
+const SEEK_CUR=1
 const SEEK_END=2
 
 einclude "../src/files/headers/xfile.h" "/usr/include/ocompiler/xfile.h"
@@ -97,7 +98,7 @@ end
 
 importx "fwrite" fwrite
 
-include "function.oc"
+include "decl.oc"
 
 aftercall *
 
@@ -114,14 +115,33 @@ function commentmulti(sv pbuffer,sd outf
 	call write(outfile,pointer,sz)
 	callret writen(outfile,"*/",2)
 end
-function commentlineend(sv *pbuffer)
+function commentlineend(sv pbuffer,sd outfile)
+	call fseek(outfile,-1,(SEEK_CUR)) #this one and line command
+	callret comment(pbuffer,outfile)
 end
-function format(sv pbuffer)
+function format(sv pbuffer) #will do nothing at the moment
 	charx fmt#1;call get_char(pbuffer,#fmt)
 end
-function include(sv *pbuffer)
+function end(sv *pbuffer,sd outfile)
+	callret writen(outfile,"}",1)
+end
+function line(sv *pbuffer,sd outfile)
+	call fseek(outfile,-1,(SEEK_CUR)) #this one and lineend comment
+	callret write(outfile,";",1)
+end
+
+function include(sv pbuffer,sd output)
+#no write
+	charx type#1;call get_char(pbuffer,#type)
+	datax sz#1;valuex pointer#1
+	call get_string(pbuffer,#sz,#pointer)
+	charx alternative#1;call get_char(pbuffer,#alternative)
+	if alternative=(Xfile_include_alternative_yes)
+		call get_string(pbuffer,#sz,#pointer)
+	end
 end
 function functiondef(sv pbuffer,sd outfile)
+#need arguments write
 	call write(outfile,"void ",5)
 
 	datax sz#1;valuex pointer#1
@@ -142,6 +162,15 @@ function functiondef(sv pbuffer,sd outfi
 
 	callret writen(outfile,"){",2)
 end
+function hex(sv pbuffer)
+#N is minimum, no write
+	datax args#1;call get_data(pbuffer,#args)
+	sd n=0;while n!=args
+		call number(pbuffer)
+		inc n
+	end
+end
+
 function declare(sv *pbuffer)
 end
 function action(sv *pbuffer)
@@ -162,9 +191,6 @@ function break(sv *pbuffer)
 end
 function continue(sv *pbuffer)
 end
-function end(sv *pbuffer,sd outfile)
-	callret writen(outfile,"}",1)
-end
 function ret(sv *pbuffer)
 end
 function library(sv *pbuffer)
@@ -173,16 +199,12 @@ function import(sv *pbuffer)
 end
 function aftercall(sv *pbuffer)
 end
-function hex(sv *pbuffer)
-end
 function override(sv *pbuffer)
 end
 function orphan(sv *pbuffer)
 end
 function interrupt(sv *pbuffer)
 end
-function line(sv *pbuffer)
-end
 
 function writen(sd outfile,ss buf,sd sz)
 	call write(outfile,buf,sz)
--- /dev/null
+++ ocompiler-1/otoc/mrcd
@@ -0,0 +1,2 @@
+
+make clean && ./mrd
--- ocompiler-1.orig/otoc/otoc.oc
+++ ocompiler-1/otoc/otoc.oc
@@ -59,10 +59,10 @@ function mainfn(sv s)
 	return (EXIT_FAILURE)
 end
 
-entryraw main(sd argc,sv s)
+entryraw main(sd argc,sv *,sd s)
 #entry main(sd argc,sv argv)
 	if argc=2
-		sd a;set a mainfn(argc,s)
+		sd a;set a mainfn(s)
 		call exit(a)
 	end
 	call puts("Usage: otoc filePath")
--- ocompiler-1.orig/src/files/actions/pathout.oc
+++ ocompiler-1/src/files/actions/pathout.oc
@@ -18,18 +18,23 @@ if safecurrentdirtopath=pointofpathout
 endif
 
 Data extension#1
-Set extension null
+sd permissions
 
 If fileformat=pe_exec
 	Char exe=".exe"
 	Str pexe^exe
 	Set extension pexe
+	set permissions (exec_perms)
 Else
 	If object=true
 		Char obj=".o"
 		Str pobj^obj
 		Set extension pobj
-	EndIf
+		set permissions (nonexec_perms)
+	else
+		Set extension null
+		set permissions (exec_perms)
+	Endelse
 EndElse
 
 If extension!=null
--- ocompiler-1.orig/src/files/actions/setdefdir.oc
+++ ocompiler-1/src/files/actions/setdefdir.oc
@@ -66,7 +66,7 @@ if logbool=true
 	endif
 endif
 if xbool!=(No)
-	setcall errormsg openfile_mode_add_extension(safecurrentdirtopath,".x",#xfile,(_open_readwrite))
+	setcall errormsg openfile_mode_add_extension(safecurrentdirtopath,".x",#xfile,(_open_readwrite),(nonexec_perms))
 	if errormsg!=noerr
 		Call msgerrexit(errormsg)
 	endif
--- ocompiler-1.orig/src/files/actions/write.oc
+++ ocompiler-1/src/files/actions/write.oc
@@ -3,7 +3,7 @@
 
 Data err#1
 
-SetCall err openfile(ptrfileout,safecurrentdirtopath,_open_write)
+SetCall err openfile(ptrfileout,safecurrentdirtopath,_open_write,permissions)
 If err!=noerr
 	Char fouterr="Error with the file out open function."
 	Str fileouterr^fouterr
--- ocompiler-1.orig/src/files/functions/commons/comfn.oc
+++ ocompiler-1/src/files/functions/commons/comfn.oc
@@ -140,12 +140,10 @@ endfunction
 
 #################Files and Folders
 #err
-Function openfile(data pfile,str path,data oflag)
-	sd permission
-	sd creat_test;set creat_test oflag;and creat_test (flag_O_CREAT);if creat_test!=0
-		set permission (pmode_mode);endif
+Function openfile(sd pfile,sd path,sd oflag,sd permissions)
+	#The mode argument specifies the file mode bits to be applied when a new file is created.  If neither O_CREAT nor O_TMPFILE is specified in flags, then mode is ignored (and can thus be specified as 0, or simply omitted).
 	Data openfalse=openno
-	SetCall pfile# open(path,oflag,permission)
+	SetCall pfile# open(path,oflag,permissions)
 	If pfile#=openfalse
 		str errorreturn#1
 		Str fileOpenErr="Cannot open a file:"
@@ -158,11 +156,11 @@ EndFunction
 #err
 function openfile_write_add_extension(ss path,ss extension,sd popen)
 	sd er
-	setcall er openfile_mode_add_extension(path,extension,popen,(_open_write))
+	setcall er openfile_mode_add_extension(path,extension,popen,(_open_write),(nonexec_perms))
 	return er
 endfunction
 #err
-function openfile_mode_add_extension(ss path,ss extension,sd popen,sd mod)
+function openfile_mode_add_extension(ss path,ss extension,sd popen,sd mod,sd perms)
 	sd er
 	setcall er maxpathverif(path,extension)
 	if er=(noerror)
@@ -171,7 +169,7 @@ function openfile_mode_add_extension(ss
 		ss b;setcall b strlen(extension)
 		inc b
 		call memtomem(c,extension,b)
-		setcall er openfile(popen,path,mod)
+		setcall er openfile(popen,path,mod,perms)
 		set c# (asciinul)  #required in all cases
 	endif
 	return er
@@ -338,8 +336,7 @@ Function file_get_content_ofs(str path,d
 	Data file#1
 	Data ptrfile^file
 
-	Data ordflag=_open_read
-	SetCall err openfile(ptrfile,path,ordflag)
+	SetCall err openfile(ptrfile,path,(_open_read)) #,perms
 	If err!=noerr
 		Return err
 	EndIf
--- ocompiler-1.orig/src/files/functions/commons/getcommand.oc
+++ ocompiler-1/src/files/functions/commons/getcommand.oc
@@ -558,6 +558,7 @@ Function getcommand(value pcontent,data
 					#here there was not a space
 					setcall result stratmemspc(#pointer,#sz,skipaftercall,spacebool)
 					if result=(TRUE)
+					#setxg
 						or ptrsubtype# (x_call_flag|x_callx_flag|x_callg_flag)
 						set pcontent# pointer
 						set psize# sz
@@ -575,7 +576,7 @@ Function getcommand(value pcontent,data
 				endelse
 			Elseif result=(TRUE)
 				If command=(cSTARTFUNCTION)
-				#functionx/entry [x] , varargs
+				#functionxx/entryx , varargs
 					#allow the command at 64, there is a check inside parsefunc, and for xfile better to know
 					#sd for64;setcall for64 is_for_64()
 					#if for64==(TRUE)
@@ -595,6 +596,7 @@ Function getcommand(value pcontent,data
 			if command=(cPRIMSEC)
 				setcall result stratmemspc(#pointer,#sz,skipaftercall,spacebool)
 				if result=(TRUE)
+				#setg
 					or ptrsubtype# (x_call_flag|x_callg_flag)
 					set pcontent# pointer
 					set psize# sz
@@ -614,6 +616,7 @@ Function getcommand(value pcontent,data
 			#if command=(cCALLEX)  #cSTARTFUNCTION is not coming here with intercursors=NULL
 				setcall result stratmemspc(#pointer,#sz,skipaftercall,spacebool)
 				if result=(TRUE)
+				#call[ex]g
 					or ptrsubtype# (x_callg_flag)
 					set pcontent# pointer
 					set psize# sz
--- ocompiler-1.orig/src/files/functions/values/numbersandconstants.oc
+++ ocompiler-1/src/files/functions/values/numbersandconstants.oc
@@ -202,7 +202,7 @@ function numbertoint(vstrx content,datax
 		sd err
 
 		if size=1
-			#the current data cursor
+			#the current data cursor   [calculation]
 			setcall outval# get_img_vdata_dataReg()
 
 			setcall err xfile_add_char_ifif((Xfile_numbers_type_idata))
@@ -215,7 +215,7 @@ function numbertoint(vstrx content,datax
 		set against content#
 		if against=(calculationmark)
 			if size=2
-				#the current virtual data cursor
+				#the current virtual data cursor   [calculation][calculation]
 				#main.ptr_nobits_virtual not yet at ocompiler, we have WinMain/main or (NULL)
 				vdata ptr_nobits_virtual%ptr_nobits_virtual
 				if ptr_nobits_virtual#=(No)
@@ -228,9 +228,10 @@ function numbertoint(vstrx content,datax
 				setcall err xfile_add_char_ifif((Xfile_numbers_type_idatax))
 				return err
 			endif
+
+			#[calculation][calculation]fsize
 			inc content
 			sub size 2
-
 			if p_parses#=(pass_init)
 				return "At the moment, \\\\func is not implemented here."  #after pass_init is the calloc for scopes
 			endif
@@ -252,7 +253,7 @@ function numbertoint(vstrx content,datax
 			ss pointer=-1;add pointer content;add pointer size
 			datax data#1;datax low#1;datax sufix#1
 			if pointer#!=(calculationmark)
-				#size of variable
+				#size of variable    # [calculation]func.var
 				setcall err xfile_add_char_if((Xfile_numbers_type_vsizeVar))
 				if err=(noerror)
 					setcall err getarg_dot_any(content,size,dot_offset,#data,#low,#sufix)
@@ -313,6 +314,7 @@ function numbertoint(vstrx content,datax
 				endif
 			endelse
 		else
+			#[calculation]fsize
 			if p_parses#=(pass_init)
 				return "At the moment, \\func is not implemented here."  #after pass_init is the calloc for scopes
 			endif
--- ocompiler-1.orig/src/files/headers/xfile.h
+++ ocompiler-1/src/files/headers/xfile.h
@@ -75,9 +75,15 @@ const Xfile_declmode_value=0
 const Xfile_declmode_group=1
 const Xfile_declmode_string=2
 
-const Xfile_numbers_parenthesis_open=0
-const Xfile_numbers_parenthesis_close=1
-const Xfile_numbers_done=2
+#here is ORing (~-N)
+const Xfile_numbers_prefix_none=0x0
+const Xfile_numbers_prefix_neg=0x1
+const Xfile_numbers_prefix_not=0x2
+#
+const Xfile_numbers_parenthesis_open=30
+const Xfile_numbers_parenthesis_close=31
+const Xfile_numbers_done=32
+# ! is 33 is an operation
 
 # ! $ % ^ & * - =+
 # e uU o p [ ]}
@@ -113,11 +119,6 @@ const Xfile_numbers_operation_unsignedgr
 const Xfile_numbers_operation_parity=asciiexclamationmark #parsed at spelling
 const Xfile_numbers_operation_odd=asciip
 
-#here is ORing
-const Xfile_numbers_prefix_none=0x0
-const Xfile_numbers_prefix_neg=0x1
-const Xfile_numbers_prefix_not=0x2
-
 #i from int
 const Xfile_numbers_type_ilong=0
 const Xfile_numbers_type_idata=1
@@ -166,7 +167,7 @@ const Xfile_arg_varfn_colon_yes=1
 const Xfile_arg_varfn_dot_no=0
 const Xfile_arg_varfn_dot_yes=1
 
-#same ORing
+#same ORing [x][g]
 const Xfile_arg_call_normal=0x
 const Xfile_arg_call_extern=0x1
 const Xfile_arg_call_skipaftercall=0x2
--- ocompiler-1.orig/src/linux/files/xheaders.h
+++ ocompiler-1/src/linux/files/xheaders.h
@@ -8,10 +8,12 @@ Const flag_O_BINARY=0       #this on lin
 Const flag_MAX_PATH=PATH_MAX
 
 Const flag_O_CREAT=0x0040
-const S_IRWXU=0x1C0
-const S_IRGRP=0x20;const S_IXGRP=0x8
-const S_IROTH=0x4;const S_IXOTH=0x1
-Const pmode_mode=S_IRWXU|S_IRGRP|S_IXGRP|S_IROTH|S_IXOTH
+const S_IRWXU=0700
+const S_IRUSR=0400;const S_IWUSR=0200
+const S_IRGRP=0040;const S_IXGRP=0010
+const S_IROTH=0004;const S_IXOTH=0001
+Const exec_perms=S_IRWXU|S_IRGRP|S_IXGRP|S_IROTH|S_IXOTH
+const nonexec_perms=S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH
 
 Const F_OK=0
 Const X_OK=1
--- ocompiler-1.orig/src/windows/files/winheaders.h
+++ ocompiler-1/src/windows/files/winheaders.h
@@ -6,7 +6,8 @@ Const flag_MAX_PATH=260
 
 Const flag_O_CREAT=0x0100
 const _S_IREAD=0x100;const _S_IWRITE=0x80
-Const pmode_mode=_S_IREAD|_S_IWRITE
+const exec_perms=_S_IREAD|_S_IWRITE
+const nonexec_perms=exec_perms
 
 data argv#1
 const p_argv^argv
--- ocompiler-1.orig/tests/.expected/acall/32.oc.x.txt
+++ ocompiler-1/tests/.expected/acall/32.oc.x.txt
@@ -1,5 +1,5 @@
-AwITAQYAAABwcmludGYGAAAAcHJpbnRmBAADAAAAYS5oAAYCAAcBAAAAAAIAAAQBAAAAMAIADgAA
+AwITAQYAAABwcmludGYGAAAAcHJpbnRmBAADAAAAYS5oAAYCAAcBAAAAAAIAAAQBAAAAMCAADgAA
 AGFmdGVyY2FsbCB0ZXN0FAABBAAAAHRlc3QFAQAAAGEAAAAAAAkAAAEAAABiCQAAAQAAAGMQBQEA
 AABiAAAAAAAJAAAGAAAAcHJpbnRmAQAAAAEFAAAAdGVzdAoQBQEAAABjAAAAAAAJAAAGAAAAcHJp
 bnRmAQAAAAEGAAAAdGVzdDIKEAUEAAAAbWFpbgMAAAAAAAYCAAQCAQAAAGUAAQAAAGEAAgAAAGkz
-CQAAAQAAAGUUAgkAAAEAAABlFAMJAAABAAAAZQcBAAAEAQAAADAC
+CQAAAQAAAGUUAgkAAAEAAABlFAMJAAABAAAAZQcBAAAEAQAAADAg
--- ocompiler-1.orig/tests/.expected/acall/32.w.oc.x.txt
+++ ocompiler-1/tests/.expected/acall/32.w.oc.x.txt
@@ -1,5 +1,5 @@
-AwITAQcAAABfcHJpbnRmBgAAAHByaW50ZgQAAwAAAGEuaAAGAgAHAQAAAAACAAAEAQAAADACAA4A
+AwITAQcAAABfcHJpbnRmBgAAAHByaW50ZgQAAwAAAGEuaAAGAgAHAQAAAAACAAAEAQAAADAgAA4A
 AABhZnRlcmNhbGwgdGVzdBQAAQQAAAB0ZXN0BQEAAABhAAAAAAAJAAABAAAAYgkAAAEAAABjEAUB
 AAAAYgAAAAAACQAABgAAAHByaW50ZgEAAAABBQAAAHRlc3QKEAUBAAAAYwAAAAAACQAABgAAAHBy
 aW50ZgEAAAABBgAAAHRlc3QyChAFBAAAAG1haW4DAAAAAAAGAgAEAgEAAABlAAEAAABhAAIAAABp
-MwkAAAEAAABlFAIJAAABAAAAZRQDCQAAAQAAAGUHAAAABAEAAAAwAg==
+MwkAAAEAAABlFAIJAAABAAAAZRQDCQAAAQAAAGUHAAAABAEAAAAwIA==
--- ocompiler-1.orig/tests/.expected/acall/64.oc.x.txt
+++ ocompiler-1/tests/.expected/acall/64.oc.x.txt
@@ -1,5 +1,5 @@
-AwMTAQYAAABwcmludGYGAAAAcHJpbnRmBAADAAAAYS5oAAYCAAcBAAAAAAIAAAQBAAAAMAIADgAA
+AwMTAQYAAABwcmludGYGAAAAcHJpbnRmBAADAAAAYS5oAAYCAAcBAAAAAAIAAAQBAAAAMCAADgAA
 AGFmdGVyY2FsbCB0ZXN0FAABBAAAAHRlc3QFAQAAAGEAAAAAAAkAAAEAAABiCQAAAQAAAGMQBQEA
 AABiAAAAAAAJAAAGAAAAcHJpbnRmAQAAAAEFAAAAdGVzdAoQBQEAAABjAAAAAAAJAAAGAAAAcHJp
 bnRmAQAAAAEGAAAAdGVzdDIKEAUEAAAAbWFpbgMAAAAAAAYCAAQCAQAAAGUAAQAAAGEAAgAAAGkz
-CQAAAQAAAGUUAgkAAAEAAABlFAMJAAABAAAAZQcAAAAEAQAAADAC
+CQAAAQAAAGUUAgkAAAEAAABlFAMJAAABAAAAZQcAAAAEAQAAADAg
--- ocompiler-1.orig/tests/.expected/acall/e.oc.x.txt
+++ ocompiler-1/tests/.expected/acall/e.oc.x.txt
@@ -1,5 +1,5 @@
 AwESCQAAAGxpYmMuc28uNhMBBgAAAHByaW50ZgYAAABwcmludGYEAAMAAABhLmgABgIABwEAAAAA
-AgAABAEAAAAwAgAOAAAAYWZ0ZXJjYWxsIHRlc3QUAAEEAAAAdGVzdAUBAAAAYQAAAAAACQAAAQAA
+AgAABAEAAAAwIAAOAAAAYWZ0ZXJjYWxsIHRlc3QUAAEEAAAAdGVzdAUBAAAAYQAAAAAACQAAAQAA
 AGIJAAABAAAAYxAFAQAAAGIAAAAAAAkAAAYAAABwcmludGYBAAAAAQUAAAB0ZXN0ChAFAQAAAGMA
 AAAAAAkAAAYAAABwcmludGYBAAAAAQYAAAB0ZXN0MgoQBQQAAABtYWluAwAAAAAABgIABAIBAAAA
-ZQABAAAAYQACAAAAaTMJAAABAAAAZRQCCQAAAQAAAGUUAwkAAAEAAABlBwEAAAQBAAAAMAI=
+ZQABAAAAYQACAAAAaTMJAAABAAAAZRQCCQAAAQAAAGUUAwkAAAEAAABlBwEAAAQBAAAAMCA=
--- ocompiler-1.orig/tests/.expected/acall/ew.oc.x.txt
+++ ocompiler-1/tests/.expected/acall/ew.oc.x.txt
@@ -1,5 +1,5 @@
 EgoAAABtc3ZjcnQuZGxsEwEGAAAAcHJpbnRmBgAAAHByaW50ZgQAAwAAAGEuaAAGAgAHAQAAAAAC
-AAAEAQAAADACAA4AAABhZnRlcmNhbGwgdGVzdBQAAQQAAAB0ZXN0BQEAAABhAAAAAAAJAAABAAAA
+AAAEAQAAADAgAA4AAABhZnRlcmNhbGwgdGVzdBQAAQQAAAB0ZXN0BQEAAABhAAAAAAAJAAABAAAA
 YgkAAAEAAABjEAUBAAAAYgAAAAAACQAABgAAAHByaW50ZgEAAAABBQAAAHRlc3QKEAUBAAAAYwAA
 AAAACQAABgAAAHByaW50ZgEAAAABBgAAAHRlc3QyChAFBAAAAG1haW4DAAAAAAAGAgAEAgEAAABl
-AAEAAABhAAIAAABpMwkAAAEAAABlFAIJAAABAAAAZRQDCQAAAQAAAGUHAAAABAEAAAAwAg==
+AAEAAABhAAIAAABpMwkAAAEAAABlFAIJAAABAAAAZRQDCQAAAQAAAGUHAAAABAEAAAAwIA==
--- ocompiler-1.orig/tests/.expected/call/call-ret.oc.x.txt
+++ ocompiler-1/tests/.expected/call/call-ret.oc.x.txt
@@ -1,3 +1,3 @@
-AwMFAQAAAGEAAAAAABAFBAAAAG1haW4DAAAAAAAGAQQAAQAAAGIBFQEAAAAAAwMAAAAxNDQCGQkA
-AAEAAABhFQEAAAAAAwMAAAAxNDQCGQoAAAEAAABhAAAAAQAAAGIAAAADAQAAADICFQEAAAAAAwMA
-AAAxNDQCGQkBAAEAAABhFQEAAAAAAwMAAAAxNDQCGQoBAAEAAABhAAAAAQAAAGIAAAADAQAAADIC
+AwMFAQAAAGEAAAAAABAFBAAAAG1haW4DAAAAAAAGAQQAAQAAAGIBFQEAAAAAAwMAAAAxNDQgGQkA
+AAEAAABhFQEAAAAAAwMAAAAxNDQgGQoAAAEAAABhAAAAAQAAAGIAAAADAQAAADIgFQEAAAAAAwMA
+AAAxNDQgGQkBAAEAAABhFQEAAAAAAwMAAAAxNDQgGQoBAAEAAABhAAAAAQAAAGIAAAADAQAAADIg
--- ocompiler-1.orig/tests/.expected/call/call-var.oc.x.txt
+++ ocompiler-1/tests/.expected/call/call-var.oc.x.txt
@@ -1,2 +1,2 @@
-AwIGAgACAAEAAABhAQADAQAAADECCQAAAQAAAGEGAgAHAAEAAABjAQADAQAAADECCQAAAQAAAGMG
-AgAEAAEAAABlAQADAQAAADECCQAAAQAAAGUGAQQAAQAAAGgBAAMBAAAAMQIJAAABAAAAaA==
+AwIGAgACAAEAAABhAQADAQAAADEgCQAAAQAAAGEGAgAHAAEAAABjAQADAQAAADEgCQAAAQAAAGMG
+AgAEAAEAAABlAQADAQAAADEgCQAAAQAAAGUGAQQAAQAAAGgBAAMBAAAAMSAJAAABAAAAaA==
--- ocompiler-1.orig/tests/.expected/call/call-var64.oc.x.txt
+++ ocompiler-1/tests/.expected/call/call-var64.oc.x.txt
@@ -1,3 +1,3 @@
-AwMGAgACAAEAAABhAQADAQAAADECAAgAAABjYWxsIGEoKQYCAAcAAQAAAGMBAAMBAAAAMQIACAAA
-AGNhbGwgYygpBgIABAABAAAAZQEAAwEAAAAxAgkAAAEAAABlBgEEAAEAAABoAQADAQAAADECCQAA
+AwMGAgACAAEAAABhAQADAQAAADEgAAgAAABjYWxsIGEoKQYCAAcAAQAAAGMBAAMBAAAAMSAACAAA
+AGNhbGwgYygpBgIABAABAAAAZQEAAwEAAAAxIAkAAAEAAABlBgEEAAEAAABoAQADAQAAADEgCQAA
 AQAAAGg=
--- ocompiler-1.orig/tests/.expected/call/callg.oc.x.txt
+++ ocompiler-1/tests/.expected/call/callg.oc.x.txt
@@ -1,6 +1,6 @@
-AwMUAAABAAAAegYBBAABAAAAYQEVAgAAAAADAwAAADE0NAIAAwMAAAAxNDQCCQAAAQAAAGEVAQAA
-AAADAwAAADE0NAIJAAIBAAAAYRUCAAAAAAMDAAAAMTQ0AgADAwAAADE0NAIKAAABAAAAYQAAAAEA
-AABhAAIAAAABAAAAYQAVAQAAAAADAwAAADE0NAIKAAIBAAAAYQAAAAEAAABhAAIAAAABAAAAYQAV
-AgAAAAADAwAAADE0NAIAAwMAAAAxNDQCCAAAAAEAAABhAAADAAEAAABhFQEAAAAAAwMAAAAxNDQC
-CAAAAAEAAABhAAADAgEAAABhFQIAAAAAAwMAAAAxNDQCAAMDAAAAMTQ0AggAAAABAAAAYQAAAwEB
-AAAAYRUBAAAAAAMDAAAAMTQ0AggAAAABAAAAYQAAAwMBAAAAYQ==
+AwMUAAABAAAAegYBBAABAAAAYQEVAgAAAAADAwAAADE0NCAAAwMAAAAxNDQgCQAAAQAAAGEVAQAA
+AAADAwAAADE0NCAJAAIBAAAAYRUCAAAAAAMDAAAAMTQ0IAADAwAAADE0NCAKAAABAAAAYQAAAAEA
+AABhAAIAAAABAAAAYQAVAQAAAAADAwAAADE0NCAKAAIBAAAAYQAAAAEAAABhAAIAAAABAAAAYQAV
+AgAAAAADAwAAADE0NCAAAwMAAAAxNDQgCAAAAAEAAABhAAADAAEAAABhFQEAAAAAAwMAAAAxNDQg
+CAAAAAEAAABhAAADAgEAAABhFQIAAAAAAwMAAAAxNDQgAAMDAAAAMTQ0IAgAAAABAAAAYQAAAwEB
+AAAAYRUBAAAAAAMDAAAAMTQ0IAgAAAABAAAAYQAAAwMBAAAAYQ==
--- ocompiler-1.orig/tests/.expected/call/callx.oc.x.txt
+++ ocompiler-1/tests/.expected/call/callx.oc.x.txt
@@ -1,5 +1,5 @@
-AwMGAgAEAAEAAABhAQADAQAAADECBQEAAABiAAAAAAAQBQQAAABtYWluAwAAAAAAFQEAAAAAAwMA
-AAAxNDQCGQkAAAEAAABhAQAAAAAAAwEAAAAxAhUBAAAAAAMDAAAAMTQ0AhkJAAABAAAAYgEAAAAA
-AAMBAAAAMQIVAQAAAAADAwAAADE0NAIZCQABAQAAAGEBAAAAAAADAQAAADECFQEAAAAAAwMAAAAx
-NDQCGQkAAQEAAABiAQAAAAAAAwEAAAAxAhUBAAAAAAMDAAAAMTQ0AhkIAAAAAQAAAGEAAAMBAQAA
-AGIBAAAAAAADAQAAADICGA==
+AwMGAgAEAAEAAABhAQADAQAAADEgBQEAAABiAAAAAAAQBQQAAABtYWluAwAAAAAAFQEAAAAAAwMA
+AAAxNDQgGQkAAAEAAABhAQAAAAAAAwEAAAAxIBUBAAAAAAMDAAAAMTQ0IBkJAAABAAAAYgEAAAAA
+AAMBAAAAMSAVAQAAAAADAwAAADE0NCAZCQABAQAAAGEBAAAAAAADAQAAADEgFQEAAAAAAwMAAAAx
+NDQgGQkAAQEAAABiAQAAAAAAAwEAAAAxIBUBAAAAAAMDAAAAMTQ0IBkIAAAAAQAAAGEAAAMBAQAA
+AGIBAAAAAAADAQAAADIgGA==
--- ocompiler-1.orig/tests/.expected/comments.oc.x.txt
+++ ocompiler-1/tests/.expected/comments.oc.x.txt
@@ -1,4 +1,4 @@
 BAAKAAAAY29tbWVudHMuaAAADwAAAGFzZGFzZHNhZGFzZGFzZAAJAAAAd3FlcXdlcXdlAQYAAAAK
-cXdlCiAFBAAAAHRlc3QDAAAAAAACAwAAADEyMwYBBwABAAAAYQIAAAMBAAAAMQICAwAAADQ1NggA
-AAABAAAAYQAAAgAAAAEAAABhAAIDAAAANzg5CAAAAAEAAABhAAAAAAMBAAAAMQICAwAAAGFiYwAD
+cXdlCiAFBAAAAHRlc3QDAAAAAAACAwAAADEyMwYBBwABAAAAYQIAAAMBAAAAMSACAwAAADQ1NggA
+AAABAAAAYQAAAgAAAAEAAABhAAIDAAAANzg5CAAAAAEAAABhAAAAAAMBAAAAMSACAwAAAGFiYwAD
 AAAAZGVmAQMAAAB6ego=
--- ocompiler-1.orig/tests/.expected/cond.oc.x.txt
+++ ocompiler-1/tests/.expected/cond.oc.x.txt
@@ -1,6 +1,6 @@
-AwMFBAAAAG1haW4DAAAAAAALAAADAQAAADEChQAAAwEAAAAxAgwLAAADAQAAADEChQAAAwEAAAAx
-AhANAAADAQAAADEChQAAAwEAAAAxAg4PEAsAAAMBAAAAMQKCAAADAQAAADECDAsAAAMBAAAAMQKD
-AAADAQAAADECDAsAAAMBAAAAMQKEAAADAQAAADECDAsAAAMBAAAAMQKFAAADAQAAADECDAsAAAMB
-AAAAMQKGAAADAQAAADECDAsAAAMBAAAAMQKHAAADAQAAADECDAsAAAMBAAAAMQKMAAADAQAAADEC
-DAsAAAMBAAAAMQKNAAADAQAAADECDAsAAAMBAAAAMQKOAAADAQAAADECDAsAAAMBAAAAMQKPAAAD
-AQAAADECEAsAAAMBAAAANAKLAAADAQAAADECEAsAAAMBAAAAMgKKAAADAQAAADECEA==
+AwMFBAAAAG1haW4DAAAAAAALAAADAQAAADEghQAAAwEAAAAxIAwLAAADAQAAADEghQAAAwEAAAAx
+IBANAAADAQAAADEghQAAAwEAAAAxIA4PEAsAAAMBAAAAMSCCAAADAQAAADEgDAsAAAMBAAAAMSCD
+AAADAQAAADEgDAsAAAMBAAAAMSCEAAADAQAAADEgDAsAAAMBAAAAMSCFAAADAQAAADEgDAsAAAMB
+AAAAMSCGAAADAQAAADEgDAsAAAMBAAAAMSCHAAADAQAAADEgDAsAAAMBAAAAMSCMAAADAQAAADEg
+DAsAAAMBAAAAMSCNAAADAQAAADEgDAsAAAMBAAAAMSCOAAADAQAAADEgDAsAAAMBAAAAMSCPAAAD
+AQAAADEgEAsAAAMBAAAANCCLAAADAQAAADEgEAsAAAMBAAAAMiCKAAADAQAAADEgEA==
--- ocompiler-1.orig/tests/.expected/declare.oc.x.txt
+++ ocompiler-1/tests/.expected/declare.oc.x.txt
@@ -1,8 +1,8 @@
-AwMGAgAAAAEAAABhAgADAwEAAAAxLQACAwEAAAAxKwADAQAAADEBAgYCAAIAAQAAAGICAQIAAAAA
-AwEAAAAyAgADAQAAADICBgIABAABAAAAYwMAAAMBAAAAMQIGAQQAAQAAAGQBBgIABAEBAAAAZAEA
-AwEAAAAxAgYCAAQCAgAAAGRkAAEAAABjBgIAAwABAAAAZQEAAwEAAAAxAgYCAAUAAQAAAGYBAAMB
-AAAAMQIGAQUAAQAAAGcCAgYAAABxd2Vxd2UGAgAHAAEAAABoAQADAQAAADECBgEHAAEAAABpAQAD
-AQAAADECBgABAAAAagIAAAgAAAB2YWx1ZSBrJQYCAAQAAQAAAGsEAAADAQAAADECBgIBBAABAAAA
-bAEAAwEAAAAxAgAJAAAAcmV0dXJuIDErBwAAAAMBAAAAMSsAAwEAAAAxAgYCAAUBAQAAAHoCAgMA
+AwMGAgAAAAEAAABhAgADAwEAAAAxLR4CAwEAAAAxKwADAQAAADEfIAYCAAIAAQAAAGICAQIAAAAA
+AwEAAAAyIAADAQAAADIgBgIABAABAAAAYwMAAAMBAAAAMSAGAQQAAQAAAGQBBgIABAEBAAAAZAEA
+AwEAAAAxIAYCAAQCAgAAAGRkAAEAAABjBgIAAwABAAAAZQEAAwEAAAAxIAYCAAUAAQAAAGYBAAMB
+AAAAMSAGAQUAAQAAAGcCAgYAAABxd2Vxd2UGAgAHAAEAAABoAQADAQAAADEgBgEHAAEAAABpAQAD
+AQAAADEgBgABAAAAagIAAAgAAAB2YWx1ZSBrJQYCAAQAAQAAAGsEAAADAQAAADEgBgIBBAABAAAA
+bAEAAwEAAAAxIAAJAAAAcmV0dXJuIDErBwAAAAMBAAAAMSsAAwEAAAAxIAYCAAUBAQAAAHoCAgMA
 AAAxMjMGAgAEAQEAAAB6AAIAAABkZAYCAAEAAQAAAHcAAQAAAGEGAgAGAAIAAAB3dwABAAAAYQYB
 BgADAAAAd3d3AAEAAABh
--- ocompiler-1.orig/tests/.expected/declareN.oc.x.txt
+++ ocompiler-1/tests/.expected/declareN.oc.x.txt
@@ -1,6 +1,6 @@
-AwMFAQAAAGIAAAAAAAYCAAAAAQAAAGECAAADAQAAADECBgIABAACAAAAYWEAAQAAAGEHAAIAAAAC
-AAAAYWEBUxAADQAAAGNvbnN0IGE9XGIuYVwGAAEAAABhAgAGAgAAAQEAAAB6AgAAAAIGAgAAAQEA
-AAB6AgAAAQIGAgAAAQEAAAB6AgAAAgIGAgAAAQEAAAB6AgAAAwEAAAAxAgYCAAABAQAAAHoCAAAF
-AwAAADB4ZgIGAgAAAQEAAAB6AgAABgEAAABhAgYCAAABAQAAAHoCAAAHAQAAAGICBgIAAAEBAAAA
-egIAAAgBAAAAYgIGAgAAAQEAAAB6AgAACQEBAAAAYgEAAABhAAIGAgAAAQEAAAB6AgAACgEAAABi
-AQAAAGEAAg==
+AwMFAQAAAGIAAAAAAAYCAAAAAQAAAGECAAADAQAAADEgBgIABAACAAAAYWEAAQAAAGEHAAIAAAAC
+AAAAYWEBUxAADQAAAGNvbnN0IGE9XGIuYVwGAAEAAABhAgAGAgAAAQEAAAB6AgAAACAGAgAAAQEA
+AAB6AgAAASAGAgAAAQEAAAB6AgAAAiAGAgAAAQEAAAB6AgAAAwEAAAAxIAYCAAABAQAAAHoCAAAF
+AwAAADB4ZiAGAgAAAQEAAAB6AgAABgEAAABhIAYCAAABAQAAAHoCAAAHAQAAAGIgBgIAAAEBAAAA
+egIAAAgBAAAAYiAGAgAAAQEAAAB6AgAACQEBAAAAYgEAAABhACAGAgAAAQEAAAB6AgAACgEAAABi
+AQAAAGEAIA==
--- ocompiler-1.orig/tests/.expected/decocthex.oc.x.txt
+++ ocompiler-1/tests/.expected/decocthex.oc.x.txt
@@ -1,7 +1,7 @@
-ABEAAABkYXRhICo9MjE0NzQ4MzY0OAYCAAIBAAAAAAIAAQMKAAAAMjE0NzQ4MzY0OAIAOwAAAGRh
+ABEAAABkYXRhICo9MjE0NzQ4MzY0OAYCAAIBAAAAAAIAAQMKAAAAMjE0NzQ4MzY0OCAAOwAAAGRh
 dGEgKj0weDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMUZGZmZGRmZm
 BgIAAgEBAAAAIAIAAAU0AAAAMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAw
-MDAwMDBGRmZmRkZmZgIGAgACAQEAAAAgAgAABBsAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAw
-MDACAB4AAABkYXRhICo9MDAwMDAwMDAwMDA3Nzc3Nzc3Nzc3NzcAHQAAAGRhdGEgKj0wMDAwMDAw
-MDAwMDc3Nzc3Nzc3Nzc3BgIAAgEBAAAAIAIAAAQWAAAAMDAwMDAwMDAwMDAzNzc3Nzc3Nzc3NwIG
-AgACAQEAAAAgAgAABBYAAAAwMDAwMDAwMDAwMDE3Nzc3Nzc3Nzc3Ag==
+MDAwMDBGRmZmRkZmZiAGAgACAQEAAAAgAgAABBsAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAw
+MDAgAB4AAABkYXRhICo9MDAwMDAwMDAwMDA3Nzc3Nzc3Nzc3NzcAHQAAAGRhdGEgKj0wMDAwMDAw
+MDAwMDc3Nzc3Nzc3Nzc3BgIAAgEBAAAAIAIAAAQWAAAAMDAwMDAwMDAwMDAzNzc3Nzc3Nzc3NyAG
+AgACAQEAAAAgAgAABBYAAAAwMDAwMDAwMDAwMDE3Nzc3Nzc3Nzc3IA==
--- ocompiler-1.orig/tests/.expected/divmul.oc.x.txt
+++ ocompiler-1/tests/.expected/divmul.oc.x.txt
@@ -1,13 +1,13 @@
-AwMGAgAAAAEAAABhAQADAQAAADECBgIAAgABAAAAYgEAAwEAAAAxAgYCAAQAAQAAAGMBAAMBAAAA
-MQIFBAAAAG1haW4DAAAAAAAVBAAAAAADAwAAADE0NAIAAwMAAAAxNDQCAAMDAAAAMTQ0AgADAwAA
-ADE0NFwAAwEAAAAxAggAAAABAAAAYQAEAgAAAAEAAABhABUEAAAAAAMDAAAAMTQ0AgADAwAAADE0
-NAIAAwMAAAAxNDQCAAMDAAAAMTQ0OgADAwAAADk5OQIIAAAAAQAAAGIABAIAAAABAAAAYgAVBAAA
-AAADAwAAADE0NAIAAwMAAAAxNDQCAAMDAAAAMTQ0AgADAwAAADE0NAIIAAAAAQAAAGMABAIAAAAB
-AAAAYwAVBAAAAAADAwAAADE0NAIAAwMAAAAxNDQCAAMDAAAAMTQ0AgADAwAAADE0NAIIAAAAAQAA
-AGEABQIAAAABAAAAYQAVBAAAAAADAwAAADE0NAIAAwMAAAAxNDQCAAMDAAAAMTQ0AgADAwAAADE0
-NAIIAAAAAQAAAGIABQIAAAABAAAAYgAVBAAAAAADAwAAADE0NAIAAwMAAAAxNDQCAAMDAAAAMTQ0
-AgADAwAAADE0NAIIAAAAAQAAAGMABQIAAAABAAAAYwAVBAAAAAADAwAAADE0NAIAAwMAAAAxNDQC
-AAMDAAAAMTQ0AgADAwAAADE0NAIIAAAAAQAAAGEAAwIAAAABAAAAYQAVBAAAAAADAwAAADE0NAIA
-AwMAAAAxNDQCAAMDAAAAMTQ0AgADAwAAADE0NAIIAAAAAQAAAGIAAwIAAAABAAAAYgAVBAAAAAAD
-AwAAADE0NAIAAwMAAAAxNDQCAAMDAAAAMTQ0AgADAwAAADE0NAIIAAAAAQAAAGMAAwIAAAABAAAA
+AwMGAgAAAAEAAABhAQADAQAAADEgBgIAAgABAAAAYgEAAwEAAAAxIAYCAAQAAQAAAGMBAAMBAAAA
+MSAFBAAAAG1haW4DAAAAAAAVBAAAAAADAwAAADE0NCAAAwMAAAAxNDQgAAMDAAAAMTQ0IAADAwAA
+ADE0NFwAAwEAAAAxIAgAAAABAAAAYQAEAgAAAAEAAABhABUEAAAAAAMDAAAAMTQ0IAADAwAAADE0
+NCAAAwMAAAAxNDQgAAMDAAAAMTQ0OgADAwAAADk5OSAIAAAAAQAAAGIABAIAAAABAAAAYgAVBAAA
+AAADAwAAADE0NCAAAwMAAAAxNDQgAAMDAAAAMTQ0IAADAwAAADE0NCAIAAAAAQAAAGMABAIAAAAB
+AAAAYwAVBAAAAAADAwAAADE0NCAAAwMAAAAxNDQgAAMDAAAAMTQ0IAADAwAAADE0NCAIAAAAAQAA
+AGEABQIAAAABAAAAYQAVBAAAAAADAwAAADE0NCAAAwMAAAAxNDQgAAMDAAAAMTQ0IAADAwAAADE0
+NCAIAAAAAQAAAGIABQIAAAABAAAAYgAVBAAAAAADAwAAADE0NCAAAwMAAAAxNDQgAAMDAAAAMTQ0
+IAADAwAAADE0NCAIAAAAAQAAAGMABQIAAAABAAAAYwAVBAAAAAADAwAAADE0NCAAAwMAAAAxNDQg
+AAMDAAAAMTQ0IAADAwAAADE0NCAIAAAAAQAAAGEAAwIAAAABAAAAYQAVBAAAAAADAwAAADE0NCAA
+AwMAAAAxNDQgAAMDAAAAMTQ0IAADAwAAADE0NCAIAAAAAQAAAGIAAwIAAAABAAAAYgAVBAAAAAAD
+AwAAADE0NCAAAwMAAAAxNDQgAAMDAAAAMTQ0IAADAwAAADE0NCAIAAAAAQAAAGMAAwIAAAABAAAA
 YwA=
--- ocompiler-1.orig/tests/.expected/end.oc.x.txt
+++ ocompiler-1/tests/.expected/end.oc.x.txt
@@ -1,3 +1,3 @@
-AwIFAQAAAGEAAAAAAA0AAAMBAAAAMQKFAAADAQAAADICCwAAAwEAAAAzAoUAAAMBAAAANAIMCwAA
-AwEAAAA1AoUAAAMBAAAANgIQCwAAAwEAAAA3AoUAAAMBAAAAOAIMEAsAAAMBAAAAOQKFAAADAgAA
-ADEwAg4QEBA=
+AwIFAQAAAGEAAAAAAA0AAAMBAAAAMSCFAAADAQAAADIgCwAAAwEAAAAzIIUAAAMBAAAANCAMCwAA
+AwEAAAA1IIUAAAMBAAAANiAQCwAAAwEAAAA3IIUAAAMBAAAAOCAMEAsAAAMBAAAAOSCFAAADAgAA
+ADEwIA4QEBA=
--- ocompiler-1.orig/tests/.expected/hex.oc.x.txt
+++ ocompiler-1/tests/.expected/hex.oc.x.txt
@@ -1 +1 @@
-FQMAAAAAAwEAAAAxAgADAQAAADICAAMBAAAAMwI=
+FQMAAAAAAwEAAAAxIAADAQAAADIgAAMBAAAAMyA=
--- ocompiler-1.orig/tests/.expected/offsetofvar.oc.x.txt
+++ ocompiler-1/tests/.expected/offsetofvar.oc.x.txt
@@ -1,8 +1,8 @@
-AwMGAgACAQAAAAABAAMBAAAANwIGAgACAAEAAABiAQADAQAAADECBQEAAABhAAAAAAAGAgACAQAA
-AAABAAMBAAAAMwIGAgACAAEAAABiAQADAQAAADECBgIBAgEAAAAAAQADAQAAADUCBgIBAgABAAAA
-YwEAAwEAAAAxAgYBBwEAAAAAAQYBBwABAAAAZAEQBQQAAABtYWluAwAAAAAAEwEGAAAAcHJpbnRm
+AwMGAgACAQAAAAABAAMBAAAANyAGAgACAAEAAABiAQADAQAAADEgBQEAAABhAAAAAAAGAgACAQAA
+AAABAAMBAAAAMyAGAgACAAEAAABiAQADAQAAADEgBgIBAgEAAAAAAQADAQAAADUgBgIBAgABAAAA
+YwEAAwEAAAAxIAYBBwEAAAAAAQYBBwABAAAAZAEQBQQAAABtYWluAwAAAAAAEwEGAAAAcHJpbnRm
 BgAAAHByaW50ZgYCAAUABAAAAGluZm8CAgMAAAAlZAoJAAAGAAAAcHJpbnRmAgAAAAAACgEAAABh
-AQAAAGIAAgIAAAAEAAAAaW5mbwACAgAAADEyCQAABgAAAHByaW50ZgIAAAAAAAoBAAAAYQEAAABj
-AAICAAAABAAAAGluZm8AAgIAAAAyMAkAAAYAAABwcmludGYCAAAAAAAKAQAAAGEBAAAAZAACAgAA
-AAQAAABpbmZvAAIBAAAAOAkAAAYAAABwcmludGYCAAAAAAAKBAAAAG1haW4BAAAAYgACAgAAAAQA
-AABpbmZvAAICAAAAMjgHAAAABAEAAAAwAg==
+AQAAAGIAIAIAAAAEAAAAaW5mbwACAgAAADEyCQAABgAAAHByaW50ZgIAAAAAAAoBAAAAYQEAAABj
+ACACAAAABAAAAGluZm8AAgIAAAAyMAkAAAYAAABwcmludGYCAAAAAAAKAQAAAGEBAAAAZAAgAgAA
+AAQAAABpbmZvAAIBAAAAOAkAAAYAAABwcmludGYCAAAAAAAKBAAAAG1haW4BAAAAYgAgAgAAAAQA
+AABpbmZvAAICAAAAMjgHAAAABAEAAAAwIA==
--- ocompiler-1.orig/tests/.expected/onearg.oc.x.txt
+++ ocompiler-1/tests/.expected/onearg.oc.x.txt
@@ -1,5 +1,5 @@
-AwMFAQAAAGIAAAAAAAYCAAIAAQAAAGEBAAMBAAAAMQIQBQQAAABtYWluAwAAAAAABgIABQABAAAA
-YQICBAAAAHF3ZXIHAAAAAwEAAAAyAgcCAQEAAQAAAGEAAQEAAABiAQAAAGEABwIBAAABAAAAYQAH
+AwMFAQAAAGIAAAAAAAYCAAIAAQAAAGEBAAMBAAAAMSAQBQQAAABtYWluAwAAAAAABgIABQABAAAA
+YQICBAAAAHF3ZXIHAAAAAwEAAAAyIAcCAQEAAQAAAGEAAQEAAABiAQAAAGEABwIBAAABAAAAYQAH
 AwEAAQEAAABiAQAAAGEABwQAAAABAAAAYQAHBQAAAAEAAABhAAcGAAAAAQAAAGEABwcAAAABAAAA
-YQAHCAAAAAEAAABhAAcJAAAAAQAAAGEABwoAAAEBAAAAYgEAAABhAAcBAAADAQAAADMCBwABBAAA
+YQAHCAAAAAEAAABhAAcJAAAAAQAAAGEABwoAAAEBAAAAYgEAAABhAAcBAAADAQAAADMgBwABBAAA
 AGFzZGYHAAIAAQEEAAAAbWFpbgEAAABhAQABAAAAYQAHAAIAAAABAAAAYg==
--- ocompiler-1.orig/tests/.expected/operations.oc.x.txt
+++ ocompiler-1/tests/.expected/operations.oc.x.txt
@@ -3,30 +3,30 @@ ICAgICAgIHJlbSAgIHJlbXUgICAgIHBvdyBhbmQg
 ICAgZXF1YWwgaW5lcXVhbCBsZXNzIGdyZWF0ZXIgbGVzc0VxdWFsIGdyZWF0ZXJFcXVhbCBsb2dp
 Y2FsQW5kIGxvZ2ljYWxPciB1bnNpZ25lZExlc3MgIHVuc2lnbmVkR3JlYXRlciB1bnNpZ25lZExl
 c3NFcXVhbCB1bnNpZ25lZEdyZWF0ZXJFcXVhbCBwYXJpdHkgb2RkICBuZWcGAgAAAQgAAABleGFt
-cGxlcwIBHgAAAAADAQAAADMrAAMBAAAAMgIAAwEAAAA2LQADAQAAADQCAAMBAAAANSoAAwEAAAA1
-AgADAgAAADMyLwADAgAAADEwAgEDAQAAADFcAAUKAAAAMHgxMDAwMDAwMAIAAwIAAAAzMiUAAwIA
-AAAxMAIBAwEAAAAxOgAFBAAAADB4MTACAAMBAAAAMyQAAwEAAAAyAgADAQAAADcmAAMBAAAAMgIA
-AwEAAAA1fAADAQAAADICAAMBAAAAN14AAwEAAAAyAgIEAQAAADACAAMBAAAAMlsAAwEAAAAyAgAD
-AQAAADhdAAMBAAAAMwIBAwEAAAAxfQADAgAAADI1AgADAQAAADc9AAMBAAAANwIAAwEAAAA3ZQAD
-AQAAADcCAAMBAAAAMjwAAwEAAAAzAgADAQAAADI+AAMBAAAAMwIAAwEAAAA5TAADAQAAADkCAAMB
-AAAAOUcAAwEAAAA5AgADAQAAADFhAAQBAAAAMAIABAEAAAAwbwADAQAAADECAAMBAAAAMXUABQoA
-AAAweGZmRkZmZkZGAgADAQAAADFVAAUKAAAAMHhmZkZGZmZGRgIBAwEAAAAxbAEDAQAAADICAQMB
-AAAAMWcABAEAAAAwAgADAQAAADQhAAMBAAAAMQIAAwEAAAAycAADAQAAADECAQYBAAAAYQIA/wAA
+cGxlcwIBHgAAAAADAQAAADMrAAMBAAAAMiAAAwEAAAA2LQADAQAAADQgAAMBAAAANSoAAwEAAAA1
+IAADAgAAADMyLwADAgAAADEwIAEDAQAAADFcAAUKAAAAMHgxMDAwMDAwMCAAAwIAAAAzMiUAAwIA
+AAAxMCABAwEAAAAxOgAFBAAAADB4MTAgAAMBAAAAMyQAAwEAAAAyIAADAQAAADcmAAMBAAAAMiAA
+AwEAAAA1fAADAQAAADIgAAMBAAAAN14AAwEAAAAyIAIEAQAAADAgAAMBAAAAMlsAAwEAAAAyIAAD
+AQAAADhdAAMBAAAAMyABAwEAAAAxfQADAgAAADI1IAADAQAAADc9AAMBAAAANyAAAwEAAAA3ZQAD
+AQAAADcgAAMBAAAAMjwAAwEAAAAzIAADAQAAADI+AAMBAAAAMyAAAwEAAAA5TAADAQAAADkgAAMB
+AAAAOUcAAwEAAAA5IAADAQAAADFhAAQBAAAAMCAABAEAAAAwbwADAQAAADEgAAMBAAAAMXUABQoA
+AAAweGZmRkZmZkZGIAADAQAAADFVAAUKAAAAMHhmZkZGZmZGRiABAwEAAAAxbAEDAQAAADIgAQMB
+AAAAMWcABAEAAAAwIAADAQAAADQhAAMBAAAAMSAAAwEAAAAycAADAQAAADEgAQYBAAAAYSAA/wAA
 AGhleDogICAgICAgICAgIDUgICAyICAgMTkgIDMgICAgIGYgICAgICAgICAgICAgIDIgICAgIGYg
 ICAgICAgIDkgICAgIDIgNyAgIDUgICBmZiAgOCAgICAxICAgICA3ZiAgICAgMSAgICAgMCAgICAg
 ICAxICAgIDAgICAgICAgMSAgICAgICAgIDEgICAgICAgICAgICAwICAgICAgICAgIDEgICAgICAg
 ICAxICAgICAgICAgICAgIDAgICAgICAgICAgICAgICAwICAgICAgICAgICAgICAgICAxICAgICAg
 ICAgICAgICAgICAgICAxICAgICAgMSAgICBmZhYGAAAAd19hc19lAAYCAAIBCQAAAG92ZXJmbG93
-cwIAAAMBAAAAMiQAAwIAAAAzMQICBAAAADgwLi4GAgACAQAAAAACAAADAQAAADIkAAMCAAAAMzIC
-Ag0AAAAwICAgIG92ZXJmbG93BgIAAgEAAAAAAgAAAwEAAAAyJAADAgAAADMzAgIXAAAAMCAgICAx
-IG92ZXJmbG93IG1lc3NhZ2UGAgACAQAAAAACAAADAQAAADFbAAMCAAAAMzECAgQAAAA4MC4uBgIA
-AgEAAAAAAgAAAwEAAAAxWwADAgAAADMyAgINAAAAMCAgICBvdmVyZmxvdwYCAAIBAAAAAAIAAAQB
-AAAAMFsAAwQAAAAxMTExAgILAAAAMCAgICBkaXJlY3QGAgACAQAAAAACAAAFCgAAADB4ODAwMDAw
-MDBdAAMCAAAAMzECAgQAAABmZi4uBgIAAgEAAAAAAgAABQoAAAAweDgwMDAwMDAwXQADAgAAADMy
-AgILAAAAZmYuLiBkaXJlY3QGAgACAQAAAAACAAAFCgAAADB4NDAwMDAwMDBdAAMCAAAAMzECAgsA
-AAAwICAgIGRpcmVjdAYCAAIBAAAAAAIAAAUKAAAAMHg4MDAwMDAwMH0AAwIAAAAzMQICAQAAADEG
-AgACAQAAAAACAAAFCgAAADB4ODAwMDAwMDB9AAMCAAAAMzICAgsAAAAwICAgIGRpcmVjdAYCAAIB
-AAAAAAIAAAUKAAAAMHhmZkZGZmZGRSsAAwEAAAAxAgICAAAAZmYGAgACAQAAAAACAAAFCgAAADB4
-ZmZGRmZmRkUrAAMBAAAAMgICDQAAADAgICAgb3ZlcmZsb3cGAgACAQAAAAACAAAFCgAAADB4NDAw
-MDAwMDAqAAMBAAAAMgICAgAAADgwBgIAAgEAAAAAAgAABQoAAAAweDQwMDAwMDAwKgADAQAAADQC
+cwIAAAMBAAAAMiQAAwIAAAAzMSACBAAAADgwLi4GAgACAQAAAAACAAADAQAAADIkAAMCAAAAMzIg
+Ag0AAAAwICAgIG92ZXJmbG93BgIAAgEAAAAAAgAAAwEAAAAyJAADAgAAADMzIAIXAAAAMCAgICAx
+IG92ZXJmbG93IG1lc3NhZ2UGAgACAQAAAAACAAADAQAAADFbAAMCAAAAMzEgAgQAAAA4MC4uBgIA
+AgEAAAAAAgAAAwEAAAAxWwADAgAAADMyIAINAAAAMCAgICBvdmVyZmxvdwYCAAIBAAAAAAIAAAQB
+AAAAMFsAAwQAAAAxMTExIAILAAAAMCAgICBkaXJlY3QGAgACAQAAAAACAAAFCgAAADB4ODAwMDAw
+MDBdAAMCAAAAMzEgAgQAAABmZi4uBgIAAgEAAAAAAgAABQoAAAAweDgwMDAwMDAwXQADAgAAADMy
+IAILAAAAZmYuLiBkaXJlY3QGAgACAQAAAAACAAAFCgAAADB4NDAwMDAwMDBdAAMCAAAAMzEgAgsA
+AAAwICAgIGRpcmVjdAYCAAIBAAAAAAIAAAUKAAAAMHg4MDAwMDAwMH0AAwIAAAAzMSACAQAAADEG
+AgACAQAAAAACAAAFCgAAADB4ODAwMDAwMDB9AAMCAAAAMzIgAgsAAAAwICAgIGRpcmVjdAYCAAIB
+AAAAAAIAAAUKAAAAMHhmZkZGZmZGRSsAAwEAAAAxIAICAAAAZmYGAgACAQAAAAACAAAFCgAAADB4
+ZmZGRmZmRkUrAAMBAAAAMiACDQAAADAgICAgb3ZlcmZsb3cGAgACAQAAAAACAAAFCgAAADB4NDAw
+MDAwMDAqAAMBAAAAMiACAgAAADgwBgIAAgEAAAAAAgAABQoAAAAweDQwMDAwMDAwKgADAQAAADQg
 Ag0AAAAwMCAgIG92ZXJmbG93
--- /dev/null
+++ ocompiler-1/tests/.expected/otoc.o.txt
@@ -0,0 +1,23 @@
+f0VMRgIBAQAAAAAAAAAAAAEAPgABAAAAAAAAAAAAAAAAAAAAAAAAAEIAAAAAAAAAAAAAAEAAAAAA
+AEAACAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAwAAAAAAAAAAAAAAAAAAAAAEAAAAAAAABAAAAAAAAAAA
+AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAYAAAAAAAAAAAAAAAAAAAAEBAAAAAAAACoA
+AAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADQAAAAgAAAADAAAAAAAAAAAAAAAAAAAALgQA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAB8AAAACAAAAAAAAAAAAAAAAAAAA
+AAAAAC4EAAAAAAAAkAAAAAAAAAAHAAAABAAAAAQAAAAAAAAAGAAAAAAAAAAnAAAABAAAAAAAAAAA
+AAAAAAAAAAAAAAC+BAAAAAAAAAAAAAAAAAAABAAAAAEAAAAEAAAAAAAAABgAAAAAAAAAMgAAAAQA
+AAAAAAAAAAAAAAAAAAAAAAAAvgQAAAAAAAAYAAAAAAAAAAQAAAACAAAABAAAAAAAAAAYAAAAAAAA
+AD0AAAADAAAAAAAAAAAAAAAAAAAAAAAAANYEAAAAAAAARQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AACLhCQIAAAAowAAAAAAAAAAU1VIi+xIi9zJW8NYSIPsMFBTVUiL7EiL3AgAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAABAAAAAwABAAAAAAAAAAAAAAAAAAAAAAAHAAAAAwACAAAAAAAAAAAAAAAAAAAA
+AAANAAAAAwADAAAAAAAAAAAAAAAAAAAAAAATAAAAIgACAAAAAAAAAAAAAAAAAAAAAAAaAAAAEgAC
+ABsAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAALmRhdGEALnRleHQALmR0
+bmIAaW50ZXJuAG1haW4ALnN5bXRhYgAucmVsYS5kYXRhAC5yZWxhLnRleHQALnN0cnRhYgA=
--- /dev/null
+++ ocompiler-1/tests/.expected/otoc.oc.log
@@ -0,0 +1,8 @@
+p
+notoc.oc
+ninclude.h
+q
+q
+vintern.a
+fintern
+x00000004
--- /dev/null
+++ ocompiler-1/tests/.expected/otoc.oc.x.txt
@@ -0,0 +1,4 @@
+AwMABwAAAGNvbW1lbnQBDAAAAAptdWx0aQpsaW5lCgQACQAAAGluY2x1ZGUuaAEJAAAAaW5jbHVk
+ZS5oADIAAABub3QgMCBzaXplIGZpbGUgdG8gYmUgaW5jbHVkZWQgaW4gZGViaWFuIGZvciB0ZXN0
+cwUGAAAAaW50ZXJuAAEAAAACAAIAAQAAAGECCgAAAGNvbW1lbnRpbmcQBQQAAABtYWluAwAAAAAA
+FQEAAAAAACAZ
--- ocompiler-1.orig/tests/.expected/primsec.oc.x.txt
+++ ocompiler-1/tests/.expected/primsec.oc.x.txt
@@ -1,5 +1,5 @@
-AwMGAgAEAAEAAABhAgAABAEAAAAwAggAAAABAAAAYQAAAAADAQAAADECCAAAAAEAAABhAAEAAAMB
-AAAAMgIIAAAAAQAAAGEAAgAAAwEAAAAzAggAAAABAAAAYQADAAADAQAAADQCCAAAAAEAAABhAAQA
-AAMBAAAANQIIAAAAAQAAAGEABgAAAwEAAAA2AggAAAABAAAAYQAIAAADAQAAADcCCAAAAAEAAABh
-AAkAAAMBAAAAOAIIAAAAAQAAAGEACgMAAQAAAGECAAAAAgAAAAEAAABhAAIAAAABAAAAYQAIAAAA
+AwMGAgAEAAEAAABhAgAABAEAAAAwIAgAAAABAAAAYQAAAAADAQAAADEgCAAAAAEAAABhAAEAAAMB
+AAAAMiAIAAAAAQAAAGEAAgAAAwEAAAAzIAgAAAABAAAAYQADAAADAQAAADQgCAAAAAEAAABhAAQA
+AAMBAAAANSAIAAAAAQAAAGEABgAAAwEAAAA2IAgAAAABAAAAYQAIAAADAQAAADcgCAAAAAEAAABh
+AAkAAAMBAAAAOCAIAAAAAQAAAGEACgMAAQAAAGECAAAAAgAAAAEAAABhAAIAAAABAAAAYQAIAAAA
 AQAAAGEACgMBAQAAAGECAAAAAgAAAAEAAABhAAIAAAABAAAAYQA=
--- ocompiler-1.orig/tests/.expected/ret.oc.x.txt
+++ ocompiler-1/tests/.expected/ret.oc.x.txt
@@ -1,3 +1,3 @@
 AwIXAAIEAAAAdGVzdAUNAAAAZW5kX3JldF90ZXN0MAAAAAAAERAFDQAAAGVuZF9yZXRfdGVzdDEA
-AAAAAAcAAAADAgAAADE1AhAFDQAAAGVuZF9yZXRfdGVzdDIAAAAAABAFBAAAAG1haW4DAAAAAAAR
-FggAAABleGl0X2VuZAERFggAAABleGl0X2VuZAACBAAAAHRlc3QRBwEAAAMBAAAAMgI=
+AAAAAAcAAAADAgAAADE1IBAFDQAAAGVuZF9yZXRfdGVzdDIAAAAAABAFBAAAAG1haW4DAAAAAAAR
+FggAAABleGl0X2VuZAERFggAAABleGl0X2VuZAACBAAAAHRlc3QRBwEAAAMBAAAAMiA=
--- ocompiler-1.orig/tests/.expected/sizeoffn.oc.x.txt
+++ ocompiler-1/tests/.expected/sizeoffn.oc.x.txt
@@ -1,16 +1,16 @@
 AwMTAQYAAABwcmludGYGAAAAcHJpbnRmABYAAABkYXRhICojXG1haW4gICNcIGVycm9yBgIAAgEA
-AAAAAQADAQAAADECGQYCAQIBAAAAAAEAAwEAAAAxAhkGAgACAQAAAAABAAMBAAAAMgIGAgAFAAEA
-AABwAgIDAAAAJXUKBQIAAABmMQAAAAAABgIAAgEAAAAAAQADAQAAADECGQYCAQIBAAAAAAEAAwEA
-AAAyAhkGAgACAQAAAAABAAMBAAAAMgIJAAAGAAAAcHJpbnRmAgAAAAAACAIAAABmMQICAAABBAAA
-AG1haW4BAAAAcAACAQAAADgJAAAGAAAAcHJpbnRmAgAAAAAABwIAAABmMQICAAABBAAAAG1haW4B
-AAAAcAACAgAAADEyBgIAAgEAAAAAAQADAQAAADECGQYCAQIBAAAAAAEAAwEAAAAxAhAGAgACAQAA
-AAABAAMBAAAAMQIZBgIBAgEAAAAAAQADAQAAADMCGQYCAAIBAAAAAAEAAwEAAAAyAgUCAAAAZjIA
-AAAAAAYCAAIBAAAAAAEAAwEAAAAxAhkGAgECAQAAAAABAAMBAAAANAIZBgIAAgEAAAAAAQADAQAA
-ADECCQAABgAAAHByaW50ZgIAAAAAAAgCAAAAZjECAgAAAQQAAABtYWluAQAAAHAAAgIAAAAxMgkA
-AAYAAABwcmludGYCAAAAAAAHAgAAAGYxAgIAAAEEAAAAbWFpbgEAAABwAAICAAAAMTYJAAAGAAAA
-cHJpbnRmAgAAAAAACAQAAABtYWluAgIAAAEEAAAAbWFpbgEAAABwAAICAAAAMTYJAAAGAAAAcHJp
-bnRmAgAAAAAABwQAAABtYWluAgIAAAEEAAAAbWFpbgEAAABwAAICAAAAMzYQBgIAAgEAAAAAAQAD
-AQAAADECGQYCAQIBAAAAAAEAAwEAAAAxAgUEAAAAbWFpbgMAAAAAAAAnAAAAY29uc3Qgbm90X2hl
+AAAAAQADAQAAADEgGQYCAQIBAAAAAAEAAwEAAAAxIBkGAgACAQAAAAABAAMBAAAAMiAGAgAFAAEA
+AABwAgIDAAAAJXUKBQIAAABmMQAAAAAABgIAAgEAAAAAAQADAQAAADEgGQYCAQIBAAAAAAEAAwEA
+AAAyIBkGAgACAQAAAAABAAMBAAAAMiAJAAAGAAAAcHJpbnRmAgAAAAAACAIAAABmMSACAAABBAAA
+AG1haW4BAAAAcAACAQAAADgJAAAGAAAAcHJpbnRmAgAAAAAABwIAAABmMSACAAABBAAAAG1haW4B
+AAAAcAACAgAAADEyBgIAAgEAAAAAAQADAQAAADEgGQYCAQIBAAAAAAEAAwEAAAAxIBAGAgACAQAA
+AAABAAMBAAAAMSAZBgIBAgEAAAAAAQADAQAAADMgGQYCAAIBAAAAAAEAAwEAAAAyIAUCAAAAZjIA
+AAAAAAYCAAIBAAAAAAEAAwEAAAAxIBkGAgECAQAAAAABAAMBAAAANCAZBgIAAgEAAAAAAQADAQAA
+ADEgCQAABgAAAHByaW50ZgIAAAAAAAgCAAAAZjEgAgAAAQQAAABtYWluAQAAAHAAAgIAAAAxMgkA
+AAYAAABwcmludGYCAAAAAAAHAgAAAGYxIAIAAAEEAAAAbWFpbgEAAABwAAICAAAAMTYJAAAGAAAA
+cHJpbnRmAgAAAAAACAQAAABtYWluIAIAAAEEAAAAbWFpbgEAAABwAAICAAAAMTYJAAAGAAAAcHJp
+bnRmAgAAAAAABwQAAABtYWluIAIAAAEEAAAAbWFpbgEAAABwAAICAAAAMzYQBgIAAgEAAAAAAQAD
+AQAAADEgGQYCAQIBAAAAAAEAAwEAAAAxIAUEAAAAbWFpbgMAAAAAAAAnAAAAY29uc3Qgbm90X2hl
 cmU9XFxmMSAgICAgICAgICNzYW1lIGVycm9yCQAAAgAAAGYxCQAAAgAAAGYyCQAABgAAAHByaW50
-ZgIAAAAAAAgEAAAAbWFpbgICAAAAAQAAAHAAAgIAAAAyMAkAAAYAAABwcmludGYCAAAAAAAHBAAA
-AG1haW4CAgAAAAEAAABwAAICAAAANDAHAAAABAEAAAAwAg==
+ZgIAAAAAAAgEAAAAbWFpbiACAAAAAQAAAHAAAgIAAAAyMAkAAAYAAABwcmludGYCAAAAAAAHBAAA
+AG1haW4gAgAAAAEAAABwAAICAAAANDAHAAAABAEAAAAwIA==
--- ocompiler-1.orig/tests/.expected/sizeofvar.oc.x.txt
+++ ocompiler-1/tests/.expected/sizeofvar.oc.x.txt
@@ -1,15 +1,15 @@
 AwMTAQYAAABwcmludGYGAAAAcHJpbnRmBQQAAABtYWluAwAAAAAABgIAAAABAAAAYQIAAAMBAAAA
-MQIGAgACAAEAAABiAgAAAwEAAAAyAgYCAAQAAQAAAGMCAAADAQAAADMCBgIABwABAAAAZAIAAAMB
-AAAAMQIGAgAFAAEAAABlAgAAAwEAAAAxAgYBBAABAAAAZgIAAAMBAAAAMQIGAgAAAAEAAABnAQAD
-BQAAADY2MTIzAgYCAQAAAgAAAGFhAQADAQAAADICBgIBAgACAAAAYmIBAAMBAAAAMwIGAgEEAAIA
-AABjYwEAAwEAAAA0AgkAAAYAAABwcmludGYCAAAAAAAJAQQAAABtYWluAQAAAGEAAgEDAAAAJWQK
-AgEAAAAxCQAABgAAAHByaW50ZgIAAAAAAAkBBAAAAG1haW4BAAAAYgACAQMAAAAlZAoCAQAAADQJ
-AAAGAAAAcHJpbnRmAgAAAAAACQEEAAAAbWFpbgEAAABjAAIBAwAAACVkCgIBAAAAOAkAAAYAAABw
-cmludGYCAAAAAAAJAQQAAABtYWluAQAAAGMBAAIBAwAAACVkCgIBAAAAOAkAAAYAAABwcmludGYC
-AAAAAAAJAQQAAABtYWluAQAAAGQBAAIBAwAAACVkCgIBAAAANAkAAAYAAABwcmludGYCAAAAAAAJ
-AQQAAABtYWluAQAAAGUBAAIBAwAAACVkCgIBAAAAMQkAAAYAAABwcmludGYCAAAAAAAJAQQAAABt
-YWluAQAAAGYAAgEDAAAAJWQKAgEAAAA4CQAABgAAAHByaW50ZgIAAAAAAAkBBAAAAG1haW4BAAAA
-ZgEAAgEDAAAAJWQKAgEAAAA4CQAABgAAAHByaW50ZgIAAAAAAAkBBAAAAG1haW4CAAAAYWEAAgED
-AAAAJWQKAgEAAAAyCQAABgAAAHByaW50ZgIAAAAAAAkBBAAAAG1haW4CAAAAYmIAAgEDAAAAJWQK
-AgIAAAAxMgkAAAYAAABwcmludGYCAAAAAAAJAQQAAABtYWluAgAAAGNjAAIBAwAAACVkCgICAAAA
-MzIAGgAAAHJldHVybiAoXG1haW4uZykgICAgI2Vycm9yBwAAAAQBAAAAMAI=
+MSAGAgACAAEAAABiAgAAAwEAAAAyIAYCAAQAAQAAAGMCAAADAQAAADMgBgIABwABAAAAZAIAAAMB
+AAAAMSAGAgAFAAEAAABlAgAAAwEAAAAxIAYBBAABAAAAZgIAAAMBAAAAMSAGAgAAAAEAAABnAQAD
+BQAAADY2MTIzIAYCAQAAAgAAAGFhAQADAQAAADIgBgIBAgACAAAAYmIBAAMBAAAAMyAGAgEEAAIA
+AABjYwEAAwEAAAA0IAkAAAYAAABwcmludGYCAAAAAAAJAQQAAABtYWluAQAAAGEAIAEDAAAAJWQK
+AgEAAAAxCQAABgAAAHByaW50ZgIAAAAAAAkBBAAAAG1haW4BAAAAYgAgAQMAAAAlZAoCAQAAADQJ
+AAAGAAAAcHJpbnRmAgAAAAAACQEEAAAAbWFpbgEAAABjACABAwAAACVkCgIBAAAAOAkAAAYAAABw
+cmludGYCAAAAAAAJAQQAAABtYWluAQAAAGMBACABAwAAACVkCgIBAAAAOAkAAAYAAABwcmludGYC
+AAAAAAAJAQQAAABtYWluAQAAAGQBACABAwAAACVkCgIBAAAANAkAAAYAAABwcmludGYCAAAAAAAJ
+AQQAAABtYWluAQAAAGUBACABAwAAACVkCgIBAAAAMQkAAAYAAABwcmludGYCAAAAAAAJAQQAAABt
+YWluAQAAAGYAIAEDAAAAJWQKAgEAAAA4CQAABgAAAHByaW50ZgIAAAAAAAkBBAAAAG1haW4BAAAA
+ZgEAIAEDAAAAJWQKAgEAAAA4CQAABgAAAHByaW50ZgIAAAAAAAkBBAAAAG1haW4CAAAAYWEAIAED
+AAAAJWQKAgEAAAAyCQAABgAAAHByaW50ZgIAAAAAAAkBBAAAAG1haW4CAAAAYmIAIAEDAAAAJWQK
+AgIAAAAxMgkAAAYAAABwcmludGYCAAAAAAAJAQQAAABtYWluAgAAAGNjACABAwAAACVkCgICAAAA
+MzIAGgAAAHJldHVybiAoXG1haW4uZykgICAgI2Vycm9yBwAAAAQBAAAAMCA=
--- ocompiler-1.orig/tests/.expected/template.oc.x.txt
+++ ocompiler-1/tests/.expected/template.oc.x.txt
@@ -1,16 +1,16 @@
-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
+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
-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
+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
-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
+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
--- ocompiler-1.orig/tests/.expected/unref.oc.x.txt
+++ ocompiler-1/tests/.expected/unref.oc.x.txt
@@ -1,2 +1,2 @@
-AwMEAAcAAAB1bnJlZi5oAAYAAQAAAGICAAUBAAAAYQAAAAAABgIBAgABAAAAYwEAAwEAAAAxAgYC
-AQIAAQAAAGQBAAMBAAAAMQIQBQQAAABtYWluAwAAAAAABwACAAABAQAAAGEBAAAAZAA=
+AwMEAAcAAAB1bnJlZi5oAAYAAQAAAGICAAUBAAAAYQAAAAAABgIBAgABAAAAYwEAAwEAAAAxIAYC
+AQIAAQAAAGQBAAMBAAAAMSAQBQQAAABtYWluAwAAAAAABwACAAABAQAAAGEBAAAAZAA=
--- ocompiler-1.orig/tests/.expected/unref2.oc.x.txt
+++ ocompiler-1/tests/.expected/unref2.oc.x.txt
@@ -1,2 +1,2 @@
-AwMEAAcAAAB1bnJlZi5oAAYAAQAAAGICAAUBAAAAYQAAAAAABgIBAgABAAAAYwEAAwEAAAAxAgYC
-AQIAAQAAAGQBAAMBAAAAMQIQCQAAAQAAAGECAAAAAAAGAQAAAGICAgAAAQEAAABhAQAAAGMA
+AwMEAAcAAAB1bnJlZi5oAAYAAQAAAGICAAUBAAAAYQAAAAAABgIBAgABAAAAYwEAAwEAAAAxIAYC
+AQIAAQAAAGQBAAMBAAAAMSAQCQAAAQAAAGECAAAAAAAGAQAAAGIgAgAAAQEAAABhAQAAAGMA
--- ocompiler-1.orig/tests/a
+++ ocompiler-1/tests/a
@@ -5,12 +5,28 @@ if [ -z "${OCOMP}" ]; then OCOMP=../src/
 
 OFLAGS+=" nul_res_pref 1"
 
+exp=.expected/
+
+copy () {
+	cp ${1} ${exp}${1}
+}
+base () {
+	base64 ${1} > ${exp}${1}.txt
+}
+
 comp () {
+	n=${1}.oc
 	if [ "${edb}" = "0" ]; then
-		edb --run ${OCOMP} ${1}.oc ${OFLAGS} || exit 1
+		edb --run ${OCOMP} ${n} ${OFLAGS} || exit 1
 	else
-		${OCOMP} ${1}.oc ${OFLAGS} || exit 1
+		${OCOMP} ${n} ${OFLAGS} || exit 1
+	fi
+	if [ -n "write_to_expected" ]; then
+		copy ${n}.log
+		base ${n}.x
+		base ${n:0:-3}.o  #this is hard coded at the moment
 	fi
+	if [ -n "compile_only" ]; then exit 0; fi
 }
 if [ -z "${ex}" ]; then
 	if [ -z "${OLINK}" ]; then OLINK=../ounused/ounused; fi
--- ocompiler-1.orig/tests/c
+++ ocompiler-1/tests/c
@@ -1,7 +1,8 @@
+
 if [ -z "${1}" ]; then is_del=1;
 else
 	is_del=0
-	is_diff=${1}
+	is_diff=${1}   # ./c 0 is to populate .expected
 	diffs=0
 fi
 e=.expected/
@@ -17,8 +18,17 @@ switch () {
 					base64 -d ${exp}${1}.txt > ${exp}${1}
 				fi
 				echo diff ${1} ${exp}${1}
-				diff ${1} ${exp}${1} || exit 1
-				diffs=$((diffs+1))
+				diff ${1} ${exp}${1}
+				if [ $? != 0 ]; then
+					if [ -z "${continue_on_diff}" ]; then
+						exit 1
+					fi
+				else
+					diffs=$((diffs+1))
+				fi
+				#if [ -z "${is_log}" ]; then  #remove them later
+				#	rm ${exp}${1}
+				#fi
 			else
 				if [ -z "${is_log}" ]; then
 					base64 ${1} > ${exp}${1}.txt
@@ -74,7 +84,14 @@ if [ ${is_del} = 0 ]; then
 			exit 1
 		fi
 	fi
-else #remove base64 troubles
+else
+	#remove otoc files
+	a=( `find -name "*.c"` )
+	for var in "${a[@]}"; do
+		rm ${var}
+	done
+
+	#remove base64 troubles #or remove them after diff
 	cd ${e}
 	a=( `find . -type f ! -name "*.txt" ! -name "*.log"` )
 	for var in "${a[@]}"; do
--- /dev/null
+++ ocompiler-1/tests/compile
@@ -0,0 +1,14 @@
+
+if [ -z "${OCOMP}" ]; then OCOMP=../src/o; fi
+
+tests=( `find -name "*.oc"` )
+
+for file in "${tests[@]}"; do
+	OFLAGS="x_file 1 nul_res_pref 1 includedir 0 relative_path 1"
+	#includedir 0 relative_path 1   to test on launchpad at <<PKGBUILDDIR>> that is not the real folder there. and ounused is also working with this
+
+	echo ${file} | grep "\.w" > /dev/null
+	if [ $? = 0 ]; then OFLAGS+=" inplace_reloc 0 conv_64 2"; fi
+	echo ${OCOMP} ${file} ${OFLAGS}
+	${OCOMP} ${file} ${OFLAGS} || exit 1
+done
--- /dev/null
+++ ocompiler-1/tests/d
@@ -0,0 +1,4 @@
+
+write_to_expected=1 compile_only=1 ./x ${1} && \
+../otoc/otoc ${1}.oc.x && \
+cc ${1}.c
--- /dev/null
+++ ocompiler-1/tests/otoc.oc
@@ -0,0 +1,18 @@
+
+format elfobj64
+
+#comment
+
+#!
+multi
+line
+!
+
+include "include.h" "include.h"
+
+function intern(data a) #commenting
+end
+
+entry main()
+hex :
+;
--- ocompiler-1.orig/tests/tests
+++ ocompiler-1/tests/tests
@@ -1,16 +1,4 @@
 
-if [ -z "${OCOMP}" ]; then OCOMP=../src/o; fi
-
-tests=( `find -name "*.oc"` )
-
-for file in "${tests[@]}"; do
-	OFLAGS="x_file 1 nul_res_pref 1 includedir 0 relative_path 1"
-	#includedir 0 relative_path 1   to test on launchpad at <<PKGBUILDDIR>> that is not the real folder there. and ounused is also working with this
-
-	echo ${file} | grep "\.w" > /dev/null
-	if [ $? = 0 ]; then OFLAGS+=" inplace_reloc 0 conv_64 2"; fi
-	echo ${OCOMP} ${file} ${OFLAGS}
-	${OCOMP} ${file} ${OFLAGS} || exit 1
-done
+./compile
 
 /bin/bash ./c 1
--- ocompiler-1.orig/tests/x
+++ ocompiler-1/tests/x
@@ -1,2 +1,3 @@
 
-OFLAGS="x_file 1" ./a $@
+OFLAGS="x_file 1 includedir 0 relative_path 1" ./a $@
+#       same as in ./compile
